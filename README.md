# Authorization API (Golang)

### Описание

API для аутентификации и авторизации пользователей, написанное на Go (Golang). Реализует безопасное управление пользователями и использует JWT (HS256) для управления токенами доступа с проверкой в базе данных.

> **Важно:** Данный проект представлен в демонстрационных целях и предназначен для показа навыков разработчика. Полноценное использование проекта ограничено, так как он зависит от других микросервисов, которые проблематично выкладывать в общий доступ.

### Технологии

- **Golang (Gin)** – высокопроизводительный веб-фреймворк.
- **JWT (HS256)** – токены доступа с проверкой в БД.
- **Docker** – контейнеризация сервиса.
- **Swagger (swaggo/swag)** – автоматическая генерация API-документации.

### Возможности

- **Stateful JWT-токены** – проверка токенов по базе данных для защиты от подделок.
- **Автоматическая документация Swagger** – генерируется при запуске проекта через Docker.
- **Цветной логгер** – кастомная реализация для удобного чтения логов в командной строке.
- **Middleware защита** – эндпоинты защищены, требуя валидный токен в заголовках.
- **Гибкая конфигурация** – настройка API через config.json.

### Установка и запуск

1. **Клонируйте репозиторий:**

   ```bash
   git clone https://github.com/your-repo/golang-authorization-api.git
   cd golang-authorization-api
   ```

2. **Установите зависимости:**

   ```bash
   go mod download
   ```

3. **Настройте config.json. Для примера:**

   ```json
   {
     "service_name": "Auth service",
     "server_port": 8101,
     "debug": false
   }
   ```

4. **Запустите API:**

   ```bash
   go run main.go
   ```

5. **Запуск через Docker:**

   ```bash
   docker build -t auth-service .
   docker run -p 8101:8101 auth-service
   ```

### Основные эндпоинты

- `POST /login` – аутентификация пользователя.
- `POST /token/create` – получение токена доступа.
- `POST /token/verify` – проверка валидности токена (защищен middleware).
- `POST /token/refresh` – обновление токена доступа (защищен middleware).
- `POST /logout` – выход и удаление токена из базы (защищен middleware).

Swagger-документация автоматически генерируется и доступна по адресу: **http://localhost:8101/swagger/index.html**, который также пишется в логи

### Особенности кода

- Структурированная архитектура с четким разделением ответственности
- Полная документация API с использованием аннотаций Swagger
- Детальное логирование всех операций с разными уровнями (Debug, Info, Warn, Error)
- Обработка ошибок на всех уровнях приложения

### Безопасность

- Защита эндпоинтов через middleware, который проверяет наличие и валидность JWT токена
- Автоматическая генерация криптографически стойкого секретного ключа при старте сервиса
- Хранение и проверка токенов в базе данных для защиты от несанкционированного использования
- Настраиваемый срок жизни токенов (по умолчанию 7 дней)
